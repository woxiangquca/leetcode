---


---

<blockquote>
<p>There are two sorted arrays nums1 and nums2 of size m and n<br>
respectively.</p>
<p>Find the median of the two sorted arrays. The overall run time<br>
complexity should be O(log (m+n)).</p>
<p>You may assume nums1 and nums2 cannot be both empty.</p>
</blockquote>
<p><a href="https://leetcode-cn.com/problems/median-of-two-sorted-arrays/">题目</a></p>
<h2 id="初始解法">初始解法</h2>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">findMedianSortedArrays</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums1<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums2<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">float</span><span class="token punctuation">:</span>
        nums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        i <span class="token operator">=</span> j <span class="token operator">=</span><span class="token number">0</span>
        <span class="token keyword">while</span> nums1 <span class="token operator">and</span> nums2<span class="token punctuation">:</span>
            <span class="token keyword">if</span> nums1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> nums2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                nums<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nums1<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">elif</span> nums2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> nums1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                nums<span class="token punctuation">.</span>append<span class="token punctuation">(</span>nums2<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> nums1<span class="token punctuation">:</span>
            nums<span class="token operator">+=</span>nums1
        <span class="token keyword">else</span> <span class="token punctuation">:</span>
            nums<span class="token operator">+=</span>nums2
        <span class="token keyword">return</span> np<span class="token punctuation">.</span>median<span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
</code></pre>
<p>是merge的思想 但是时间复杂度是O(m+n) 并不满足提意<br>
是一种<strong>超级慢</strong>的做法</p>
<h2 id="官方解法">官方解法</h2>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">median</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">:</span>
    m<span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>B<span class="token punctuation">)</span>
    <span class="token keyword">if</span> m <span class="token operator">&gt;</span> n<span class="token punctuation">:</span>
        A<span class="token punctuation">,</span> B<span class="token punctuation">,</span> m<span class="token punctuation">,</span> n <span class="token operator">=</span> B<span class="token punctuation">,</span> A<span class="token punctuation">,</span> n<span class="token punctuation">,</span> m
    <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> ValueError

    imin<span class="token punctuation">,</span> imax<span class="token punctuation">,</span> half_len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> m<span class="token punctuation">,</span> <span class="token punctuation">(</span>m <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>
    <span class="token keyword">while</span> imin <span class="token operator">&lt;=</span> imax<span class="token punctuation">:</span>
        i <span class="token operator">=</span> <span class="token punctuation">(</span>imin <span class="token operator">+</span> imax<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>
        j <span class="token operator">=</span> half_len <span class="token operator">-</span> i
        <span class="token keyword">if</span> i <span class="token operator">&lt;</span> m <span class="token operator">and</span> B<span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> A<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token comment"># i is too small, must increase it</span>
            imin <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">elif</span> i <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">and</span> A<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> B<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token comment"># i is too big, must decrease it</span>
            imax <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token comment"># i is perfect</span>

            <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span> max_of_left <span class="token operator">=</span> B<span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span>
            <span class="token keyword">elif</span> j <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span> max_of_left <span class="token operator">=</span> A<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span> max_of_left <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>A<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> B<span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>m <span class="token operator">+</span> n<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> max_of_left

            <span class="token keyword">if</span> i <span class="token operator">==</span> m<span class="token punctuation">:</span> min_of_right <span class="token operator">=</span> B<span class="token punctuation">[</span>j<span class="token punctuation">]</span>
            <span class="token keyword">elif</span> j <span class="token operator">==</span> n<span class="token punctuation">:</span> min_of_right <span class="token operator">=</span> A<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span> min_of_right <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>A<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> B<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>

            <span class="token keyword">return</span> <span class="token punctuation">(</span>max_of_left <span class="token operator">+</span> min_of_right<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2.0</span>
</code></pre>
<p><a href="https://leetcode-cn.com/problems/median-of-two-sorted-arrays/solution/xun-zhao-liang-ge-you-xu-shu-zu-de-zhong-wei-shu-b/">分析过程</a>较长 在这里不赘述 只说一下思路</p>
<ol>
<li>先是分析中位数应该满足的参数（i是数组a的划分点,j是数组b的划分点）条件 算法目的就在寻找这个i</li>
<li>A[i-1]&lt;B[j] &amp;&amp; B[j-1]&lt;A[i] （保证左边的任意元素小于右边的任意元素）和 i+j = m+n-i-j（左右两边元素个数一样）</li>
<li>根据条件不等式的左右大小确定参数的变化方向 改变i的上下界 一次缩小一半</li>
<li>根据数组的索引考虑边界情况</li>
</ol>
<h2 id="问题一般化">问题一般化</h2>
<p>问题可以一般化为</p>
<blockquote>
<p>求两个有序数组的第k个数</p>
</blockquote>
<p><strong>一般来说求第k个数的方法</strong></p>
<ol>
<li>分别求出第一个和第二个数组的第 k / 2个数 a 和 b</li>
<li>然后比较 a 和 b，当a &lt; b ，说明第 k 个数位于 a数组的第 k / 2个数后半段，或者b数组的 第 k / 2 个数前半段</li>
<li>步长缩小一半，继续递归处理。</li>
</ol>
<p>速度比较慢 但是是一种具有普适性的做法</p>
<h3 id="非递归做法">非递归做法</h3>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">findMedianSortedArrays</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums1<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums2<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">float</span><span class="token punctuation">:</span>
        m <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums1<span class="token punctuation">)</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums2<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token operator">+</span>n<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">2</span> <span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>nums1<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>nums2<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">(</span>m<span class="token operator">+</span>n<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>nums1<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>nums2<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">(</span>m<span class="token operator">+</span>n<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>nums1<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>nums2<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">(</span>m<span class="token operator">+</span>n<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span>
        
    <span class="token keyword">def</span> <span class="token function">find</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> a<span class="token punctuation">,</span> a_begin<span class="token punctuation">,</span>b<span class="token punctuation">,</span>b_begin<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">while</span> a_begin<span class="token operator">&lt;</span><span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">and</span> b_begin <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> k<span class="token operator">==</span><span class="token number">1</span> <span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token builtin">min</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>a_begin<span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">[</span>b_begin<span class="token punctuation">]</span><span class="token punctuation">)</span>
            a_k <span class="token operator">=</span> a<span class="token punctuation">[</span>a_begin <span class="token operator">+</span> k<span class="token operator">//</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">if</span> a_begin <span class="token operator">+</span> k<span class="token operator">//</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token number">100000</span>
            b_k <span class="token operator">=</span> b<span class="token punctuation">[</span>b_begin <span class="token operator">+</span> k<span class="token operator">//</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">if</span> b_begin <span class="token operator">+</span> k<span class="token operator">//</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token number">100000</span> 
            
            <span class="token keyword">if</span> a_k <span class="token operator">&lt;</span> b_k<span class="token punctuation">:</span>
                a_begin <span class="token operator">=</span> a_begin <span class="token operator">+</span> k<span class="token operator">//</span><span class="token number">2</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                b_begin <span class="token operator">=</span> b_begin <span class="token operator">+</span> k<span class="token operator">//</span><span class="token number">2</span>
            k <span class="token operator">=</span> k <span class="token operator">-</span> k<span class="token operator">//</span><span class="token number">2</span>
        
        <span class="token keyword">if</span> a_begin<span class="token operator">&lt;</span><span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> a<span class="token punctuation">[</span>a_begin<span class="token operator">+</span>k<span class="token number">-1</span><span class="token punctuation">]</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> b<span class="token punctuation">[</span>b_begin<span class="token operator">+</span>k<span class="token number">-1</span><span class="token punctuation">]</span>
</code></pre>
<h3 id="递归做法">递归做法</h3>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">findMedianSortedArrays</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums1<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums2<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">float</span><span class="token punctuation">:</span>
        m <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums1<span class="token punctuation">)</span>
        n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums2<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token operator">+</span>n<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">2</span> <span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>nums1<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>nums2<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">(</span>m<span class="token operator">+</span>n<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>nums1<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>nums2<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">(</span>m<span class="token operator">+</span>n<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>nums1<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>nums2<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">(</span>m<span class="token operator">+</span>n<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span>
        
    <span class="token keyword">def</span> <span class="token function">find</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> a<span class="token punctuation">,</span> a_begin<span class="token punctuation">,</span>b<span class="token punctuation">,</span>b_begin<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> a_begin<span class="token operator">&gt;=</span><span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> b<span class="token punctuation">[</span>b_begin<span class="token operator">+</span>k<span class="token number">-1</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> b_begin<span class="token operator">&gt;=</span><span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> a<span class="token punctuation">[</span>a_begin<span class="token operator">+</span>k<span class="token number">-1</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> k<span class="token operator">==</span><span class="token number">1</span> <span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token builtin">min</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>a_begin<span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">[</span>b_begin<span class="token punctuation">]</span><span class="token punctuation">)</span>
        a_k <span class="token operator">=</span> a<span class="token punctuation">[</span>a_begin <span class="token operator">+</span> k<span class="token operator">//</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">if</span> a_begin <span class="token operator">+</span> k<span class="token operator">//</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token number">100000</span>
        b_k <span class="token operator">=</span> b<span class="token punctuation">[</span>b_begin <span class="token operator">+</span> k<span class="token operator">//</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">if</span> b_begin <span class="token operator">+</span> k<span class="token operator">//</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token number">100000</span> 
            
        <span class="token keyword">if</span> a_k <span class="token operator">&lt;</span> b_k<span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>a<span class="token punctuation">,</span>a_begin<span class="token operator">+</span>k<span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">,</span>b<span class="token punctuation">,</span>b_begin<span class="token punctuation">,</span>k<span class="token operator">-</span>k<span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>find<span class="token punctuation">(</span>a<span class="token punctuation">,</span>a_begin<span class="token punctuation">,</span>b<span class="token punctuation">,</span>b_begin<span class="token operator">+</span>k<span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">,</span>k<span class="token operator">-</span>k<span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">)</span>     
</code></pre>

